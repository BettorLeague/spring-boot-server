version: "2"
services:
  phpmyadmin:
    container_name: bettor-league-phpmyadmin
    image: phpmyadmin/phpmyadmin
    expose:
      - "80"
    ports:
      - "8090:80"
    environment:
      - MYSQL_USERNAME=root
      - MYSQL_PASSWORD=root
      - PMA_ABSOLUTE_URI=http://localhost:8090
    links:
      - database:db
  database:
    container_name: bettor-league-database
    image: mysql:5.7
    expose:
      - "3306"
    volumes:
      - ./databaseProd:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=bettorLeagueDatabase
  bettor-league-api:
    container_name: bettor-league-api
    image: nadjim/bettor-league-api
    restart: always
    ports:
      - "8080:8080"
    environment:
      - DATABASE_HOST=database
      - DATABASE_USER=root
      - DATABASE_PASSWORD=root
      - DATABASE_NAME=bettorLeagueDatabase
      - DATABASE_PORT=3306
    depends_on:
      - database
networks:
  default:
    external:
      name: bettor-league-network